# Logs Aggregator service

This project wraps the `Zipkin Server` application that is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in service architectures. Features include both the collection and lookup of this data.

This service is acting as a consumer of the logging events reported by the other services. For this, make sure services are reporting to this aggregator.

## Built With 

* 	[Gradle](https://gradle.com/) - Dependency Management
* 	[JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) - Java™ Platform, Standard Edition Development Kit 
* 	[Zipkin](https://www.zipkin.com/) - Zipkin is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in service architectures. Features include both the collection and lookup of this data.
* 	[Docker](https://www.docker.com/) - Docker is a set of platform as a service products that uses OS-level virtualization to deliver software in packages called containers..
* 	[Git](https://git-scm.com/) - Free and Open-Source distributed version control system 

## To-Do

- [x] Docker
- [ ] Add persistent storage 

## Running the application locally

There are several ways to run a this application on your local machine.
One way is build the distribution package by running in shell `gradlew build`. 
Then navigate to generated dist `../build/distributions-docker/app/bin` and run the service `sr-logs-aggregator-service`


Alternatively you can build the Docker image. 
Open shell and navigation to project root folder where the `Dockerfile` is located , then run 
 * ``docker build -t sr-logs-aggregator .`` - this will create docker image of the application 
 * ``docker run -d -p 9411:9411 sr-logs-aggregator`` - this will run docker container with the created image

### UI:
To access the Zipkin dashboard, navigate to http://your_host:9411/zipkin/

### Security
At this point of time - UI is not secured
 - Note: this will change in the future - replaced with a security provider 


## Documentation

* [Zipkin](https://github.com/openzipkin/zipkin#quick-start) - Official Zipkin documentation 
* [Zipkin Server Config](https://github.com/openzipkin/zipkin/tree/master/zipkin-server) - Configuration details  

## Files and Directories

The project (a.k.a. project directory) has a particular directory structure. A representative project is shown below:

```
GENERATED BY RUNNING: tree /A  sr-logs-aggregator-service
.
\---src
    \---main
        \---resources
            \---libs
```

## packages

- `resources/libs` - holds Zipkin executable jar.
- `resources/application.properties` - It contains application-wide properties. Spring reads the properties defined in this file to configure your application. You can define server’s default port, server’s context path, database URLs etc, in this file.

- `build.gradle` - contains all the project dependencies and building logic
 
## Reporting Issues

This Project uses GitHub's integrated issue tracking system to record bugs and feature requests. If you want to raise an issue, please follow the recommendations below:

* Before you log a bug, please https://github.com/maimas/mg-smartrent/issues [search the issue tracker]
  to see if someone has already reported the problem.
* If the issue doesn't already exist, https://github.com/maimas/mg-smartrent/issues/new[create a new issue]. 
* Please provide as much information as possible with the issue report.
* If you need to paste code, or include a stack trace use Markdown +++```+++ escapes before and after your text. 
  
## Resources

* [My API Lifecycle Checklist and Scorecard](https://dzone.com/articles/my-api-lifecycle-checklist-and-scorecard)
* [HTTP Status Codes](https://www.restapitutorial.com/httpstatuscodes.html)
* [Common application properties](https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html)


## License
TBD
<!--[![FOSSA Status](https://app.fossa.io/api/projects/git%2Bgithub.com%2FSpring-Boot-Framework%2FSpring-Boot-Application-Template.svg?type=large)](https://app.fossa.io/projects/git%2Bgithub.com%2FSpring-Boot-Framework%2FSpring-Boot-Application-Template?ref=badge_large)-->